<link rel="stylesheet" href="css/style.css">
<script src="js/dependencies/jquery.min.js"></script>
  <script src="js/dependencies/moment.min.js"></script>
  <script src="js/dependencies/mustache.min.js"></script>
  <script src="js/dependencies/showdown.min.js"></script>
  <script src="js/dependencies/vue.min.js"></script>
  <script src="js/dependencies/vue-router.min.js"></script>
  
<main id="blog">
  
  <router-view></router-view>
  
</main>

<template id="feed">
  <div class="feed">
      
    <snippet v-for="post in posts" 
             :post="post" 
             :key="post"></snippet>
    
    <div v-if="loading">FETCHING POSTS...</div>
    
    <button v-if="more && !loading" @click="loadMore( 1000 )">Load More</button>
    
  </div>
</template>

<template id="snippet">
  <div class="snippet" 
       :class="[ post.meta.category ? 'category-' + $options.filters.id(post.meta.category) : '']">
    
    <div class="feature" v-if="post.meta.feature">
      
      <div class="image" :style="{ 'background-image': 'url(' + post.meta.feature + ')' }"></div>
      
      <div class="overlay"></div>
    
      <router-link v-if="post.meta.category" 
                   tag="a"
                   class="category"
                   :to="'category/' + $options.filters.id(post.meta.category)">
        {{post.meta.category}}
      </router-link>
      
      <h1 class="heading">{{post.meta.title}}</h1>
      
    </div>
    
    <div class="content">
    
      <div class="description">{{post.meta.description}}</div>
      
      <ul class="tags" v-if="post.meta.tags">
        <router-link v-for="tag in post.meta.tags" 
                     tag="li"
                     :to="'/tag/' + $options.filters.id(tag)">
          #{{tag | id}}
        </router-link>
      </ul>
      
      <router-link :to="'/post/' + post.id" 
                   tag="button" 
                   class="button more">
        Read More
      </router-link>
      
    </div>
    
  </div>
</template>

<template id="post">
  <article class="post" v-html="post.html"></article>
</template>

<template id="category">
  <div class="category">
      
    <snippet v-for="post in posts" 
             :post="post" 
             :key="post"></snippet>
    
  </div>
</template>

<template id="tag">
  <div class="tag">
      
    <snippet v-for="post in posts" 
             :post="post" 
             :key="post"></snippet>
    
  </div>
</template>
  
<script src="js/markdown.js"></script>
  <script src="js/blog.js"></script>
<script src="//localhost:35729/livereload.js"></script>