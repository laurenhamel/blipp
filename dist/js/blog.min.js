"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),ROOT_PATH="/markdown-blog/";$.when($.getJSON(ROOT_PATH+"meta.json").then(function(e){return e}),$.getJSON(ROOT_PATH+"router.json").then(function(e){return e})).done(function(e,t){var o=ROOT_PATH+t.api,r=ROOT_PATH+t.feed,n={"500px":"//500px.com/:username",linkedin:"//linkedin.com/in/:username",facebook:"//facebook.com/:username",github:"//github.com/:username",instagram:"//instagram.com/:username",twitter:"//twitter.com/@:username",behance:"//behance.com/:username",dribbble:"//dribbble.com/:username",pinterest:"//pinterest.com/:username",tumblr:"//:username.tumblr.com",myspace:"//myspace.com/:username",google:"//plus.google.com/:username:id",soundcloud:"//soundcloud.com/:username",blogger:"//:username.blogspot.com",coderwall:"//coderwall.com/:username",stackoverflow:"//stackoverflow.com/users/:id/:username",stackexchange:"//:category.stackexchange.com/users/:id/:username",masterbranch:"//masterbranch.com/d/:username",reddit:"//reddit.com/user/:username",livejournal:"//:username.livejournal.com",skype:"skype::username",flickr:"//flickr.com/photos/:username",foursquare:"//foursquare.com/:username",mixcloud:"//mixcloud.com/:username",etsy:"//etsy.com/people/:username","8tracks":"//8tracks.com/:username",npm:"//npmjs.com/~:username",patreon:"//patreon.com/:username",quora:"//quora.com/profile/:username",researchgate:"//researchgate.net/profile/:username",reverbnation:"//reverbnation.com/:username",slideshare:"//slideshare.net/:username",vimeo:"//vimeo.com/:username",youtube:{channel:"//youtube.com/channel/:username:id",user:"//youtube.com/[:username, :id]"},vine:"//vine.co/:username",yelp:"//yelp.com/user_details?userid=:id",zerply:"//zerply.com/:username",trello:"//trello.com/:username",sketchfab:"//sketchfab.com/:username",bitbucket:"//bitbucket.org/:username",fundable:"//fundable.com/:username",gofundme:{profile:"//gofundme.com/profile/:username",fund:"//gofundme.com/:fund"},slack:"//:team.slack.com/",unsplash:"//unsplace.com/@:username",codepen:"//codepen.io/:username",instructables:"//instructables.com/member/:username",gitlab:"//gitlab.com/:username"},a={email:"mailto:?subject=:title&body=:description Read more at :url.",facebook:"//facebook.com/sharer/sharer.php?u=:url&quote=:description",twitter:"//twitter.com/intent/tweet?&text=:description&url=:url",linkedin:"//linkedin.com/shareArticle?url=:url&title=:title&summary=:description",pinterest:"//pinterest.com/pin/create/bookmarklet?media=:feature&url=:url&description=:description",pocket:"//getpocket.com/save?title=:title&url=:url",reddit:"//reddit.com/submit?url=:url&title=:title",tumblr:"//tumblr.com/widgets/share/tool?canonicalUrl=:url&posttyle=link&title=:title&caption=:description",google:"//plus.google.com/share?url=:url",buffer:"//buffer.com/add?text=:description&url=:url",stumpleupon:"//stumbleupon.com/submit?url=:url&title=:title",blogger:"//blogger.com/blog-this.g?u=:url&n=:title&t=:description",livejournal:"//livejournal.com/update.bml?subject=:title&event=:url",myspace:"//myspace.com/post?u=:url&t=:title&c=:description",evernote:"//evernote.com/clip.action?url=:url",flipboard:"//share.flipboard.com/bookmarklet/popout?v=2&title=:title&url:url",instapaper:"//instapaper.com/edit?url=:url&title=:title&description=:description",skype:"//web.skype.com/share?url=:url",digg:"//digg.com/submit?url=:url&title=:title"},s=function(){function e(t){_classCallCheck(this,e),this.params=$.extend({},t),this.src=o}return _createClass(e,[{key:"getFeed",value:function(){return $.getJSON(this.src+"/feed/?"+$.param(this.params))}},{key:"getPosts",value:function(){return $.getJSON(this.src+"/posts/?"+$.param(this.params))}},{key:"getPostsByTag",value:function(e){return $.getJSON(this.src+"/posts/tag/"+e+"/?"+$.param(this.params))}},{key:"getPostsByCategory",value:function(e){return $.getJSON(this.src+"/posts/category/"+e+"/?"+$.param(this.params))}},{key:"getPostsByAuthor",value:function(e){return $.getJSON(this.src+"/posts/author/"+e+"/?"+$.param(this.params))}},{key:"getPostById",value:function(e){return $.getJSON(this.src+"/posts/id/"+e+"/")}},{key:"getPostBySlug",value:function(e){return $.getJSON(this.src+"/posts/slug/"+e+"/")}},{key:"getPostsByKeywords",value:function(e){return $.getJSON(this.src+"/posts/keywords/"+e+"/")}},{key:"getTags",value:function(){return $.getJSON(this.src+"/tags/?"+$.param(this.params))}},{key:"getCategories",value:function(){return $.getJSON(this.src+"/categories/?"+$.param(this.params))}},{key:"getAuthors",value:function(){return $.getJSON(this.src+"/authors/?"+$.param(this.params))}},{key:"getAuthorByName",value:function(e){return $.getJSON(this.src+"/authors/name/"+e+"/?"+$.param(this.params))}}]),e}(),i=function(){function e(t){_classCallCheck(this,e),this.params=$.extend({},t),this.src="//graph.facebook.com",this.version="v2.11"}return _createClass(e,[{key:"getUserProfileImage",value:function(e){return this.src+"/"+this.version+"/"+e+"/picture/?"+$.param(this.params)}}]),e}(),u={id:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return"string"!=typeof e?e:e.replace(/ /g,t).toLowerCase()},date:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMMM d, YYYY",o=moment(e);return o.isValid()?o.format(t):e}},l={setTitle:function(e){document.title=e,c.$emit("title:changed"),c.$emit("blog:event","title:changed")},socialURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.split(".");var o=n;if(e.forEach(function(e){return o=o[e]}),o){for(var r in t){var a=t[r];o.indexOf(":"+r)>-1&&(o=o.replace(":"+r,a))}return o=o.replace(/:[a-z0-9_-]+(?=:|\/|\.|)/g,"")}},shareURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.split(".");var o=a;if(e.forEach(function(e){return o=o[e]}),o){for(var r in t){var n=t[r];o.indexOf(":"+r)>-1&&(o=o.replace(":"+r,encodeURIComponent(n)))}return o=o.replace(":url",location.href),o=o.replace(/:[a-z0-9_-]+(?=:|\/|\.|)/g,"")}}},c=new Vue,m=Vue.component("feed",{template:"#feed",props:["limit","sort","order"],data:function(){return{posts:[],next:{},more:!1,loading:!1}},filters:$.extend({},u),methods:$.extend({loadMore:function(e){e=e||0;var t=this,o=new s({sort:this.sort,order:this.order,limit:this.next.limit,offset:this.next.offset});t.next={},t.more=!1,t.loading=!0,o.getPosts().then(function(o){setTimeout(function(){t.posts=[].concat(_toConsumableArray(t.posts),_toConsumableArray(o.data)),t.loading=!1},e),o.next&&(t.more=!0,t.next=o.next),c.$emit("feed:more"),c.$emit("blog:event","feed:more")})}},l),created:function(){var t=this,o=new s({sort:this.sort,order:this.order,limit:this.limit});t.setTitle(e.title),o.getPosts().then(function(e){t.posts=e.data,e.next&&(t.more=!0,t.next=e.next),c.$emit("feed:loaded"),c.$emit("blog:event","feed:loaded")})}}),d=(Vue.component("snippet",{template:"#snippet",props:["post"],data:function(){return{}},filters:$.extend({},u),methods:$.extend({},l)}),Vue.component("post",{template:"#post",props:["id"],data:function(){return{location:location,post:{config:{},meta:{"date-created":{},"date-modified":{}},html:null,contents:null,filename:null,frontmatter:null,id:null,markdown:null,path:null},share:["email","linkedin","facebook","twitter","google"]}},filters:$.extend({},u),methods:$.extend({},l),created:function(){var t=this;(new s).getPostById(t.$route.params.id).then(function(o){t.post=o.data,t.setTitle(e.title+" | "+e.prefix.post+t.post.meta.title),c.$emit("post:loaded"),c.$emit("blog:event","post:loaded")})},beforeRouteUpdate:function(t,o,r){var n=this;(new s).getPostById(t.params.id).then(function(t){n.post=t.data,n.setTitle(e.title+" | "+e.prefix.post+n.post.meta.title),c.$emit("post:changed"),c.$emit("blog:event","post:changed"),r()})}})),p=Vue.component("category",{template:"#category",props:["category","limit","sort","order"],data:function(){return{posts:[],next:{},more:!1,loading:!1}},methods:$.extend({loadMore:function(e){e=e||0;var t=this,o=new s({sort:this.sort,order:this.order,limit:this.next.limit,offset:this.next.offset});t.next={},t.more=!1,t.loading=!0,o.getPosts().then(function(o){setTimeout(function(){t.posts=[].concat(_toConsumableArray(t.posts),_toConsumableArray(o.data)),t.loading=!1},e),o.next&&(t.more=!0,t.next=o.next),c.$emit("category:more"),c.$emit("blog:event","category:more")})}},l),filters:$.extend({},u),created:function(){var t=this,o=new s({limit:this.limit,sort:this.sort,order:this.order});t.setTitle(e.title+" | "+e.prefix.tag+t.$route.params.category),o.getPostsByCategory(t.$route.params.category).then(function(e){t.posts=e.data,e.next&&(t.more=!0,t.next=e.next),c.$emit("category:loaded"),c.$emit("blog:event","category:loaded")})},beforeRouteUpdate:function(t,o,r){var n=this,a=new s({limit:this.limit,sort:this.sort,order:this.order});n.setTitle(e.title+" | "+e.prefix.tag+t.params.category),a.getPostsByCategory(t.params.category).then(function(e){n.posts=e.data,e.next&&(n.more=!0,n.next=e.next),c.$emit("category:changed"),c.$emit("blog:event","category:changed"),r()})}}),g=Vue.component("tag",{template:"#tag",props:["tag","limit","sort","order"],data:function(){return{posts:[],next:{},more:!1,loading:!1}},methods:$.extend({loadMore:function(e){e=e||0;var t=this,o=new s({sort:this.sort,order:this.order,limit:this.next.limit,offset:this.next.offset});t.next={},t.more=!1,t.loading=!0,o.getPosts().then(function(o){setTimeout(function(){t.posts=[].concat(_toConsumableArray(t.posts),_toConsumableArray(o.data)),t.loading=!1},e),o.next&&(t.more=!0,t.next=o.next),c.$emit("tag:more"),c.$emit("blog:event","tag:more")})}},l),filters:$.extend({},u),created:function(){var t=this,o=new s({limit:this.limit,sort:this.sort,order:this.order});t.setTitle(e.title+" | "+e.prefix.tag+t.$route.params.tag),o.getPostsByTag(t.$route.params.tag).then(function(e){t.posts=e.data,e.next&&(t.more=!0,t.next=e.next),c.$emit("tag:loaded"),c.$emit("blog:event","tag:loaded")})},beforeRouteUpdate:function(t,o,r){var n=this,a=new s({limit:this.limit,sort:this.sort,order:this.order});n.setTitle(e.title+" | "+e.prefix.tag+t.params.tag),a.getPostsByTag(t.params.tag).then(function(e){n.posts=e.data,e.next&&(n.more=!0,n.next=e.next),c.$emit("tag:changed"),c.$emit("blog:event","tag:changed"),r()})}}),h=Vue.component("author",{template:"#author",props:["author","limit","sort","order"],data:function(){return{photo:null,about:{config:{},meta:{},html:null,markdown:null,frontmatter:null,path:null,filename:null,contents:null},posts:[],next:{},more:!1,loading:!1,socials:Object.keys(n)}},methods:$.extend({loadMore:function(e){e=e||0;var t=this,o=new s({sort:this.sort,order:this.order,limit:this.next.limit,offset:this.next.offset});t.next={},t.more=!1,t.loading=!0,o.getPosts().then(function(o){setTimeout(function(){t.posts=[].concat(_toConsumableArray(t.posts),_toConsumableArray(o.data)),t.loading=!1},e),o.next&&(t.more=!0,t.next=o.next),c.$emit("author:more"),c.$emit("blog:event","author:more")})},getFbProfileImage:function(){var e,t=this;if(t.about.meta.facebook)return(e=t.about.meta.facebook.id)?new i({width:300}).getUserProfileImage(e):void 0}},l),filters:$.extend({},u),created:function(){var t=this,o=new s({limit:this.limit,sort:this.sort,order:this.order});t.setTitle(e.title+" | "+e.prefix.author+t.$route.params.author),$.when(o.getAuthorByName(t.$route.params.author).then(function(e){t.about=e.data,c.$emit("author:loaded:info")}),o.getPostsByAuthor(t.$route.params.author).then(function(e){t.posts=e.data,e.next&&(t.more=!0,t.next=e.next),c.$emit("author:loaded:posts")})).done(function(){c.$emit("author:loaded"),c.$emit("blog:event","author:loaded")})},beforeRouteUpdate:function(t,o,r){var n=this,a=new s({limit:this.limit,sort:this.sort,order:this.order});n.setTitle(e.title+" | "+e.prefix.author+t.params.author),$.when(a.getAuthorByName(t.params.author).then(function(e){n.about=e.data,c.$emit("author:changed:info")}),a.getPostsByAuthor(t.params.author).then(function(e){n.posts=e.data,e.next&&(n.more=!0,n.next=e.next),c.$emit("author:changed:posts")})).done(function(){c.$emit("author:changed"),c.$emit("blog:event","author:changed"),r()})}}),f=new VueRouter({routes:[{path:"/",component:m,props:{limit:10,sort:"date-created",order:"newest"}},{path:"/post/:id",component:d},{path:"/category/:category",component:p,props:{limit:10,sort:"date-created",order:"newest"}},{path:"/tag/:tag",component:g,props:{limit:10,sort:"date-created",order:"newest"}},{path:"/author/:author",component:h,props:{limit:10,sort:"date-created",order:"newest"}},{path:r,redirect:function(e){window.location=API_SRC+e.path}}]});new Vue({router:f,el:"#blog",created:function(){c.$on("blog:event",function(e){var t=0,o=setInterval(function(){t+=10,c.$emit(e+":"+t)},10);setTimeout(function(){clearInterval(o)},1001)});var e=function(e,t,o){$(e).addClass(t),setTimeout(function(){$(e).removeClass(t)},o)};new Clipboard(".copy").on("success",function(t){e(t.trigger,"copy-success",2e3)}).on("error",function(t){e(t.trigger,"copy-error",2e3)});var t={languages:[],interpret:function(e){var t=$(e).html().trim(),o=e.className.split(/\s+/).filter(function(e){return 0===e.indexOf("language-")})[0].replace("language-","");$(e).empty();var r=$("<textarea>",{html:t,css:{"margin-top":"-99999px","margin-left":"-99999px",position:"absolute",opacity:0}}).appendTo(document.body);return t=r.val(),r.remove(),{code:t,language:o}},parse:function(e,t){return CodeMirror(e,{tabSize:2,value:t.code,mode:t.language,lineNumbers:!0,readOnly:!0,viewportMargin:1/0})},setup:function(){$("pre > code").each(function(e,o){var r=t.interpret(o);-1==t.languages.indexOf(r.language)?(t.languages.push(r.language),$(document).queue("codemirror",function(e){$.getScript("js/dependencies/codemirror/"+r.language+".js").then(function(){t.parse(o,r),e()})})):$(document).queue("codemirror",function(e){t.parse(o,r),e()})}),$(document).dequeue("codemirror")}};c.$on("post:loaded:10",t.setup),c.$on("post:changed:10",t.setup)}})});